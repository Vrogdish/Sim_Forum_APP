@if (currentUser$ | async; as currentUser) {
<form [formGroup]="profileForm" class="profile container container-small" (ngSubmit)="onSubmit()">
  <div class="info">
    <div class="avatar-container">
      <img
        [src]="
          previewUrl ||
          apiUploadUrl +
            currentUser?.avatarUrl +
            '?t=' +
            (currentUser?.updatedAt | date : 'yyyyMMddHHmmss')
        "
        alt="avatar"
        class="avatar"
        (click)="fileInput.click()"
      />
      <input
        #fileInput
        type="file"
        id="avatarInput"
        (change)="onFileSelected($event)"
        hidden
        accept="image/png"
      />
    </div>
    <div>
      <h2>{{ currentUser?.username }}</h2>
      <p>{{ currentUser?.email }}</p>
      <p>Inscrit depuis le {{ currentUser?.createdAt | date : 'dd/MM/yyyy' }}</p>
    </div>
  </div>
  <div class="profile-signature">
    <h3>Ma signature</h3>
    <textarea formControlName="signature" id="signature"> </textarea>
    <div class="profile-btn">
      <app-btn
        theme="cancel"
        (onClick)="resetForm()"
        text="Annuler"
        [disabled]="profileForm.pristine"
      />
      <app-btn
        theme="primary"
        (onClick)="onSubmit()"
        text="Enregistrer"
        [disabled]="profileForm.invalid || profileForm.pristine"
      />
    </div>

    @if (errorMessage) {
    <p class="text-alert">{{ errorMessage }}</p>
    }
  </div>
  <app-btn theme="danger" (onClick)="logout()" text="Se dÃ©connecter" />
  <p class="text-alert">Supprimer mon compte</p>
</form>
}
